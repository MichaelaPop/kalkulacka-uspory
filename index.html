<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kalkulačka úspor – Alcasys</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
:root{
  --text:#0f172a;
  --muted:#667085;
  --accent:#2563eb;
  --accent-d:#1e40af;
  --ring:rgba(37,99,235,.35);
  --card:#ffffff;
  --ok:#16a34a;
  --err:#dc2626;
}

/* Pozadí s jemným modrým gradientem */
html,body{
  margin:0;
  height:100%;
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:var(--text);
  background:
    radial-gradient(80% 120% at 0% 0%, #eaf2ff 0%, transparent 60%),
    radial-gradient(80% 120% at 100% 0%, #f0f6ff 0%, transparent 60%),
    linear-gradient(180deg,#f7faff 0%, #ffffff 60%);
  background-attachment: fixed;
  font-size:17px; /* lehce větší text */
  line-height:1.6;
}

.wrap{max-width:860px;margin:36px auto;padding:0 16px}
.card{
  background:var(--card);
  border-radius:22px;
  box-shadow:0 18px 48px rgba(2,6,23,.12);
  padding:22px;
}

/* Zúžený sloupec pro pole (cca polovina šířky karty) */
.form-narrow{max-width:480px;margin:0 auto}

h1{margin:0 0 10px;font-size:24px}
.sub{margin:0 0 18px;color:var(--muted);font-size:15px}

.grid{display:grid;gap:10px}
label{display:block;margin:2px 0 4px;font-weight:600;font-size:14px}

input,select,textarea{
  width:100%;
  font:inherit;
  font-size:15px;
  padding:8px 10px;             /* nižší pole */
  border:1.6px solid #c9d5ee;   /* výraznější rámeček */
  border-radius:12px;
  background:#f9fbff;
  transition:border-color .15s,box-shadow .15s,background .15s,transform .05s;
}
input:hover,select:hover,textarea:hover{border-color:#b5c6ee}
input:focus,select:focus,textarea:focus{outline:0;border-color:var(--accent);box-shadow:0 0 0 3px var(--ring);background:#fff}
input[type="number"]{appearance:textfield}
textarea{min-height:90px;resize:vertical}

.row-actions{display:flex;justify-content:center;margin-top:12px}
button{
  appearance:none;border:0;border-radius:14px;background:var(--accent);
  color:#fff;font-weight:700;padding:12px 22px;cursor:pointer;transition:background .15s,transform .05s;
  box-shadow:0 10px 22px rgba(37,99,235,.25);
  min-width:220px;               /* větší tlačítko */
}
button:hover{background:var(--accent-d)}
button:active{transform:translateY(1px)}
button.secondary{background:#e7eefc;color:var(--accent);box-shadow:none}
button.secondary:hover{background:#dbe6ff}

.hidden{display:none!important}
.note{margin-top:10px;font-size:14px}
.ok{color:var(--ok)} .err{color:var(--err)}
.hp{position:absolute;left:-10000px;opacity:0}

/* Vejde se na obrazovku notebooku bez scrollu po krocích */
@media (min-height:780px){
  .wrap{margin:28px auto}
  .card{padding:22px}
}

/* Mobil: pole na plnou šířku, pohodlné okraje */
@media (max-width:560px){
  .form-narrow{max-width:100%}
  .card{padding:18px}
  h1{font-size:22px}
}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <!-- KROK 1 -->
    <section id="step1">
      <div class="form-narrow">
        <h1>Zjistěte, kolik můžete ušetřit díky našemu řešení pro kontaktní centra.</h1>
        <p class="sub">Vyplňte prosím, co nejvíce informací pro nejpřesnější výsledek.</p>

        <div class="grid">
          <div>
            <label for="agents_total">Celkový počet agentů</label>
            <input id="agents_total" name="agents_total" type="number" min="0">
          </div>

          <div>
            <label for="monthly_cost">Měsíční náklady na aktuální technologické řešení (Kč)</label>
            <input id="monthly_cost" name="monthly_cost" type="number" min="0" step="1">
          </div>

          <div>
            <label for="calls_in_month">Počet příchozích hovorů/měsíc</label>
            <input id="calls_in_month" name="calls_in_month" type="number" min="0">
          </div>

          <div>
            <label for="avg_in_sec">Průměrná doba jednoho příchozího hovoru (s)</label>
            <input id="avg_in_sec" name="avg_in_sec" type="number" min="0">
          </div>

          <div>
            <label for="calls_out_month">Počet odchozích hovorů/měsíc</label>
            <input id="calls_out_month" name="calls_out_month" type="number" min="0">
          </div>

          <div>
            <label for="avg_out_sec">Průměrná doba jednoho odchozího hovoru (s)</label>
            <input id="avg_out_sec" name="avg_out_sec" type="number" min="0">
          </div>

          <div>
            <label for="use_nonvoice">Využíváte i nehlasové kanály?</label>
            <select id="use_nonvoice" name="use_nonvoice">
              <option value="" selected disabled>Vyberte…</option>
              <option value="NE">NE</option>
              <option value="ANO">ANO</option>
            </select>
          </div>

          <div id="nonvoice_wrap" class="hidden">
            <label for="emails_month">Množství e-mailových interakcí/měsíc</label>
            <input id="emails_month" name="emails_month" type="number" min="0">
            <label for="chats_month" style="margin-top:8px">Množství chatovacích interakcí/měsíc</label>
            <input id="chats_month" name="chats_month" type="number" min="0">
          </div>
        </div>

        <div class="row-actions">
          <button id="to_step2" type="button">Další</button>
        </div>
      </div>
    </section>

    <!-- KROK 2 -->
    <section id="step2" class="hidden">
      <div class="form-narrow">
        <h1>Pro výsledek prosím vyplňte své údaje:</h1>

        <div class="grid">
          <div>
            <label for="full_name">Jméno a příjmení</label>
            <input id="full_name" name="full_name">
          </div>
          <div>
            <label for="company">Společnost</label>
            <input id="company" name="company">
          </div>
          <div>
            <label for="phone">Telefon</label>
            <input id="phone" name="phone" inputmode="tel">
          </div>
          <div>
            <label for="reply_to">E-mail</label>
            <input id="reply_to" name="reply_to" type="email" placeholder="např. jana@firma.cz">
          </div>
        </div>

        <input class="hp" type="text" id="website" name="website" autocomplete="off" tabindex="-1" />

        <div class="row-actions">
          <button id="back_to_1" class="secondary" type="button">Zpět</button>
          <button id="submit_btn" type="button">Spočítat</button>
        </div>
        <p id="note" class="note"></p>
      </div>
    </section>

    <!-- KROK 3 -->
    <section id="step3" class="hidden">
      <div class="form-narrow">
        <h1>Děkujeme za vyplnění údajů.</h1>
        <p class="sub">Nevycházíme z obecných odhadů ani náhodných čísel. Každému klientovi se věnujeme individuálně a výsledky stavíme na reálných datech a zkušenostech z praxe.</p>
        <p class="sub">Výpočet vašich možných úspor vám brzy zašleme.</p>
        <p class="note ok" id="final_msg"></p>
      </div>
    </section>
  </div>
</div>

<!-- EmailJS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
// ===== Tvoje EmailJS údaje (dle zadání) =====
const PUBLIC_KEY   = "vt8iib1leI62JB7YV";
const SERVICE_ID   = "service_hoq963k";
const TEMPLATE_ID_INTERNAL = "template_dyuy5ss";
const TEMPLATE_ID_CONFIRM  = null; // můžeš doplnit např. "template_confirm"

emailjs.init({ publicKey: PUBLIC_KEY });

// Prvky
const step1 = document.getElementById('step1');
const step2 = document.getElementById('step2');
const step3 = document.getElementById('step3');

const toStep2Btn = document.getElementById('to_step2');
const backTo1Btn = document.getElementById('back_to_1');
const submitBtn  = document.getElementById('submit_btn');

const useNonvoice  = document.getElementById('use_nonvoice');
const nonvoiceWrap = document.getElementById('nonvoice_wrap');

const note = document.getElementById('note');
const finalMsg = document.getElementById('final_msg');

// Toggle nehlasových kanálů
useNonvoice.addEventListener('change', () => {
  const show = useNonvoice.value === 'ANO';
  nonvoiceWrap.classList.toggle('hidden', !show);
  if (!show){
    document.getElementById('emails_month').value = '';
    document.getElementById('chats_month').value  = '';
  }
});

// Helpery
function val(id){ return (document.getElementById(id)?.value || '').trim(); }

// Krokování – bez povinných polí
toStep2Btn.addEventListener('click', () => {
  step1.classList.add('hidden');
  step2.classList.remove('hidden');
  window.scrollTo({top:0,behavior:'smooth'});
});

backTo1Btn?.addEventListener('click', () => {
  step2.classList.add('hidden');
  step1.classList.remove('hidden');
  note.textContent = '';
  window.scrollTo({top:0,behavior:'smooth'});
});

// Payload
function collectPayload(){
  return {
    agents_total:     val('agents_total'),
    calls_in_month:   val('calls_in_month'),
    calls_out_month:  val('calls_out_month'),
    avg_out_sec:      val('avg_out_sec'),
    avg_in_sec:       val('avg_in_sec'),
    monthly_cost:     val('monthly_cost'),
    use_nonvoice:     val('use_nonvoice') || 'NEUVEDENO',
    emails_month:     val('emails_month'),
    chats_month:      val('chats_month'),
    full_name:        val('full_name'),
    company:          val('company'),
    phone:            val('phone'),
    reply_to:         val('reply_to')      // může zůstat prázdné; potvrzovací email pak neposíláme
  };
}

// Odeslání
submitBtn.addEventListener('click', async () => {
  note.textContent = '';

  // Anti-bot honeypot
  if (document.getElementById('website').value){ return; }

  // Lehká validace e-mailu (jen pokud je vyplněn)
  const email = val('reply_to');
  if (email && !/^\S+@\S+\.\S+$/.test(email)){
    note.textContent = 'Zadej prosím platný e-mail, nebo pole nech prázdné.';
    note.className = 'note err';
    return;
  }

  submitBtn.disabled = true; submitBtn.textContent = 'Odesílám…';

  const payload = collectPayload();

  try{
    await emailjs.send(SERVICE_ID, TEMPLATE_ID_INTERNAL, payload);
    if (TEMPLATE_ID_CONFIRM && email){
      await emailjs.send(SERVICE_ID, TEMPLATE_ID_CONFIRM, payload);
    }
    step2.classList.add('hidden');
    step3.classList.remove('hidden');
    finalMsg.textContent = 'Formulář byl úspěšně odeslán.';
  }catch(err){
    console.error(err);
    note.textContent = 'Odeslání se nepodařilo. Zkuste to prosím znovu.';
    note.className = 'note err';
  }finally{
    submitBtn.disabled = false; submitBtn.textContent = 'Spočítat';
  }
});
</script>
</body>
</html>
